// Script to control position of a single leg
// Author: ScottoBots, 4/8/2019

// import ax12 library to send dynamixel commands
#include <ax12.h>
#include <BioloidController.h>

BioloidController bioloid = BioloidController(1000000);

int id_1, id_2, id_3; // motor IDs
int pos_1, pos_2, pos_3; // position (absolute)
int motor_1[] = {-1,1,-1};//{518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,517,518,518,518,518,519,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,517,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,517,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,518,517,517,517,517,517,517,517,517,515,515,515,514,514,514,514,514,513,514,514,514,514,514,514,513,514,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,513,512,512,512,512,512,511,510,509,508,507,504,502,500,498,496,492,491,489,487,484,482,478,475,473,470,467,464,462,459,457,454,450,448,445,442,439,436,433,430,427,424,422,418,416,414,412,410,406,404,401,399,395,393,390,387,385,382,379,377,375,374,372,369,368,366,365,364,363,360,359,358,357,355,355,354,354,352,351,350,350,349,349,348,347,346,345,345,345,345,345,343,343,343,343,343,342,342,342,342,342,342,342,342,342,342,342,342,342,341,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,339,339,339,339,339,339,339,339,339,339,339,339,339,339,339,339,339,339,340,339,339,340,339,339,339,339,339,340,339,339,340,340,340,340,340,340,339,340,340,340,340,339,339,339,339,339,339,339,339,339,340,340,340,340,340,339,340,341,342,342,343,345,346,348,349,351,352,354,355,356,358,359,360,361,363,364,366,367,368,369,372,373,374,375,376,378,379,382,384,385,387,388,390,391,392,394,396,397,400,401,402,404,406,408,409,411,412,413,414,415,417,418,421,422,424,425,426,428,430,432,433,434,436,438,439,441,444,445,446,447,449,450,451,453,454,457,458,459,461,462,462,463,464,466,467,469,470,471,472,475,476,477,479,481,482,484,485,486,487,489,491,492,494,496,497,499,501,502,504,506,507,509,510,512,514,515,517,519,520,521,523,524,527,528,529,530,532,533,534,535,538,539,541,542,543,545,547,548,550,551,552,553,555,557,558,559,560,561,562,563,564,565,567,569,570,571,572,573,574,575,578,579,581,582,583,586,586,587,589,590,591,591,592,593,593,594,596,597,598,599,599,600,600,600,601,602,603,604,604,606,607,608,608,609,610,610,611,611,612,612,614,614,614,616,616,616,617,617,619,619,619,619,620,621,622,623,623,623,625,625,626,627,627,627,628,628,628,628,628,628,628,628,628,628,628,628,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,629,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,627,626,627,627,627,627,627,627,627,627,627,627,627,627,627};
int motor_2[] = {-1,1,-1};//{491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,490,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,490,490,490,490,488,487,486,485,483,481,478,477,474,472,470,466,464,461,459,455,452,449,446,444,439,436,432,428,425,422,418,415,412,408,405,401,398,394,390,386,383,379,375,372,370,366,364,361,360,358,355,354,353,351,350,349,348,346,345,344,343,341,341,340,339,338,336,335,334,333,332,331,331,330,330,328,328,326,325,325,324,323,323,323,322,322,321,321,320,320,319,319,319,319,318,318,318,318,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,316,315,316,316,318,318,319,320,321,322,323,325,326,329,331,331,333,336,338,340,341,343,345,349,351,353,356,358,361,363,365,366,370,372,374,376,379,381,383,385,388,391,393,395,398,401,403,405,409,411,413,415,417,420,421,423,425,427,429,430,433,435,437,438,440,441,442,444,446,447,448,449,450,452,454,455,455,458,459,460,461,462,463,465,466,466,467,469,470,471,471,471,472,472,472,472,472,473,473,473,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,473,472,472,472,472,472,472,472,472,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,473,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,474,475,474,475,475,475,473,475,475,475,476,476,476,476,477,476,476,477,477,477,477,477,477,477,477,476,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,476,475,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,477,478,477,477,477,477,477,477,477,477,477,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,479,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,478,479,479,479,479,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481,481};
int motor_3[] = {-1,1,-1};//{822,824,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,821,821,821,821,821,821,821,821,820,820,820,820,820,820,820,820,820,820,820,820,820,820,820,820,820,820,820,821,821,821,821,821,821,821,821,821,821,821,821,821,821,821,821,821,822,822,821,822,822,822,822,822,822,824,824,824,824,824,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,824,824,824,824,824,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,822,824,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,825,826,826,827,827,827,827,827,827,827,827,827,828,828,828,829,829,830,830,832,832,832,833,833,833,833,834,834,834,834,834,835,835,835,835,835,835,835,835,835,835,835,835,835,836,836,836,836,835,835,835,835,836,836,836,836,836,837,837,838,838,838,839,841,841,841,842,842,842,842,843,843,844,844,844,844,844,844,845,846,846,846,846,846,847,847,847,847,847,847,847,849,849,849,850,850,850,850,851,851,852,852,852,852,853,853,853,853,854,854,854,854,854,854,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,857,857,857,857,857,857,857,857,857,855,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,857,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,855,854,854,854,854,854,853,854,853,854,854,853,854,853,853,854,854,854,854,854,853,854,854,853,853,854,853,854,854,854,853,853,853,854,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,852,853,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,852,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853,853};

void setup(){
   Serial.println("testing...");
   pinMode(0,OUTPUT);  
   
   //initialize variables 
   id_1 = 1;
   id_2 = 2;
   id_3 = 3;
   pos_1 = 0;
   pos_2 = 0;
   pos_3 = 0;
   
   //open serial port
   Serial.begin(9600);
   delay(500);   
   Serial.println("\nStarting to set motor positions...");
}

void loop(){
  Serial.println("Setting positions...");
  for(int i=0; i < (sizeof(motor_1)/sizeof(motor_1[0])); i++) {
//    bioloid.setNextPose(id_1, motor_1[i]);
//    bioloid.setNextPose(id_2, motor_2[i]);
//    bioloid.setNextPose(id_3, motor_3[i]);
    SetPosition(id_1, motor_1[i]);
    delay(10);
    SetPosition(id_2, motor_2[i]);
    delay(10);
    SetPosition(id_3, motor_3[i]);
    delay(10);
  }
}
